(("undefined"!==typeof self?self:this)["webpackJsonpkubewarden_0_1_18"]=("undefined"!==typeof self?self:this)["webpackJsonpkubewarden_0_1_18"]||[]).push([[2],{"016f":function(e,t,a){"use strict";a.r(t);var s=function(){var e=this,t=e.$createElement,a=e._self._c||t;return e.isCreate?a("Create",{attrs:{value:e.value,mode:e.mode}}):a("CruResource",{attrs:{resource:e.value,mode:e.realMode,errors:e.errors},on:{finish:e.finish}},[a("Config",{attrs:{value:e.value,mode:e.mode}})],1)},r=[],i=a("da25"),o=a("305c"),l=a("fd5f"),n=a("90cd"),c=function(){var e=this,t=e.$createElement,a=e._self._c||t;return e.$fetchState.pending?a("Loading",{attrs:{mode:"relative"}}):a("Values",{attrs:{value:e.value,"chart-values":e.chartValues,"yaml-values":e.yamlValues,mode:e.mode}})},u=[],d=a("c5e6"),p=a("15ca"),h=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("div",{staticClass:"scroll__container"},[a("div",{staticClass:"scroll__content"},[a("Tabbed",{ref:"tabs",staticClass:"step__values__content",attrs:{"side-tabs":!0},on:{changed:function(t){return e.tabChanged(t)}}},[a(e.valuesComponent,{tag:"component",attrs:{mode:e.mode},model:{value:e.chartValues,callback:function(t){e.chartValues=t},expression:"chartValues"}})],1)],1)])])},v=[],m=a("0cb2"),b={name:"Values",props:{mode:{type:String,default:i["u"]},chartValues:{type:Object,required:!0},value:{type:Object,required:!0}},components:{Tabbed:m["a"]},async fetch(){try{await this.loadValuesComponent()}catch(e){console.error("Error loading values component: "+e)}},data(){return{showQuestions:!0,showValuesComponent:!1,valuesComponent:null}},computed:{isCreate(){return this.mode===i["u"]}},methods:{async loadValuesComponent(){this.value.haveComponent("kubewarden/policy-server")&&(this.valuesComponent=this.value.importComponent("kubewarden/policy-server"),await this.valuesComponent(),this.showValuesComponent=!0)},tabChanged(){window.scrollTop=0}}},f=b,y=(a("8766"),a("d802")),g=Object(y["a"])(f,h,v,!1,null,"56b7c1bc",null),_=g.exports,w={name:"Config",props:{mode:{type:String,default:i["C"]},value:{type:Object,required:!0}},components:{Loading:p["a"],Values:_},fetch(){this.value&&(this.chartValues={questions:this.value},this.yamlValues=Object(d["c"])(this.value))},data(){return{chartValues:null,yamlValues:null}}},x=w,C=Object(y["a"])(x,c,u,!1,null,null,null),k=C.exports,V=function(){var e=this,t=e.$createElement,a=e._self._c||t;return e.$fetchState.pending?a("Loading",{attrs:{mode:"relative"}}):a("CruResource",{attrs:{resource:e.value,mode:e.realMode,"done-route":e.doneRoute,errors:e.errors,"generate-yaml":e.generateYaml},on:{finish:e.finish,error:e.clearErrors}},[a("Values",{attrs:{value:e.value,"chart-values":e.chartValues,mode:e.mode}})],1)},O=[],M=a("1fcb"),S=a.n(M),R=a("907c"),j=a("e24b"),P=a("3ca3"),$={name:"Create",props:{mode:{type:String,default:i["u"]},value:{type:Object,required:!0}},components:{Loading:p["a"],Values:_,CruResource:l["a"]},mixins:[o["a"]],fetch(){var e,t,a,s,r,i;this.errors=[];const o=structuredClone(P["DEFAULT_POLICY_SERVER"]);this.chartValues={questions:o},this.value.apiVersion=`${null===(e=this.schema)||void 0===e||null===(t=e.attributes)||void 0===t?void 0:t.group}.${null===(a=this.schema)||void 0===a||null===(s=a.attributes)||void 0===s?void 0:s.version}`,this.value.kind=null===(r=this.schema)||void 0===r||null===(i=r.attributes)||void 0===i?void 0:i.kind},data(){return{errors:null,chartValues:null}},methods:{clearErrors(){this.errors=[]},async finish(e){try{var t;S()(this.value,null===(t=this.chartValues)||void 0===t?void 0:t.questions),await this.save(e)}catch(a){this.errors.push(a)}},generateYaml(){var e;const t=this.$store.getters["currentStore"](this.value),a=this.$store.getters[t+"/all"](R["y"]),s=null!==(e=this.chartValues)&&void 0!==e&&e.questions?Object(j["e"])(this.chartValues.questions):this.value,r=Object(d["b"])(a,this.value.type,s);return r}}},Y=$,q=Object(y["a"])(Y,V,O,!1,null,null,null),E=q.exports,T={components:{CruResource:l["a"],Config:k,Create:E},mixins:[o["a"]],props:{mode:{type:String,default:i["w"]},realMode:{type:String,default:i["w"]},value:{type:Object,required:!0}},async fetch(){this.errors=[],await this.$store.getters["cluster/schemaFor"](n["a"].POLICY_SERVER)},data(){return{errors:null}},computed:{isCreate(){return this.realMode===i["u"]}},methods:{async finish(e){try{await this.save(e)}catch(t){this.errors.push(t)}}}},A=T,L=Object(y["a"])(A,s,r,!1,null,null,null);t["default"]=L.exports},1:function(e,t){},"1dc0":function(e,t,a){var s=a("c44b");s.__esModule&&(s=s.default),"string"===typeof s&&(s=[[e.i,s,""]]),s.locals&&(e.exports=s.locals);var r=a("0ed3").default;r("0e68c201",s,!0,{sourceMap:!1,shadowMode:!1})},2:function(e,t){},"47cd":function(e,t,a){var s=a("5eaa");t=s(!1),t.push([e.i,'.clearfix[data-v-17774782]:after,.clearfix[data-v-17774782]:before{content:" ";display:table}.clearfix[data-v-17774782]:after{clear:both}.list-unstyled[data-v-17774782]{margin:0;padding:0;list-style-type:none}.no-select[data-v-17774782]{-webkit-user-select:none;-moz-user-select:none;user-select:none}.no-resize[data-v-17774782]{resize:none}.hand[data-v-17774782]{cursor:pointer;cursor:hand}.fixed[data-v-17774782]{table-layout:fixed}.clip[data-v-17774782]{text-overflow:ellipsis;overflow:hidden;white-space:nowrap}.clip[data-v-17774782],.force-wrap[data-v-17774782]{word-wrap:break-word}.force-wrap[data-v-17774782]{white-space:normal}.bordered-section[data-v-17774782]{border-bottom:1px solid var(--border);margin-bottom:20px;padding-bottom:20px}.section-divider[data-v-17774782]{margin-bottom:20px;margin-top:20px}[data-v-17774782] .step-container{height:auto}[data-v-17774782] .header .step-sequence{display:block}[data-v-17774782] .header .step-sequence .steps .divider{top:22px}[data-v-17774782] .controls-row .controls-steps{display:flex}[data-v-17774782] .subtype{height:110px;margin:10px;position:relative;border-radius:calc(var(--border-radius)*1.5);border:1px solid var(--border);text-decoration:none!important;color:var(--body-text)!important}[data-v-17774782] .subtype:hover:not(.disabled){box-shadow:0 0 30px var(--shadow);transition:box-shadow .1s ease-in-out;cursor:pointer;text-decoration:none!important}[data-v-17774782] .subtype__metadata{padding:10px}[data-v-17774782] .subtype__metadata__description,[data-v-17774782] .subtype__metadata__label{padding-right:20px}[data-v-17774782] .subtype__badge{position:absolute;right:0;top:0;padding:4px 5px;border-bottom-left-radius:var(--border-radius)}[data-v-17774782] .subtype__badge label{font-size:12px;line-height:12px;text-align:center;display:block;white-space:no-wrap;text-overflow:ellipsis;color:var(--app-rancher-accent-text);margin:0}[data-v-17774782] .subtype__label{white-space:nowrap;overflow:hidden;text-overflow:ellipsis;margin-bottom:4px;line-height:normal}[data-v-17774782] .subtype__description{margin-right:10px;display:-webkit-box;-webkit-box-orient:vertical;-webkit-line-clamp:3;line-clamp:3;overflow:hidden;text-overflow:ellipsis;color:var(--input-label)}',""]),e.exports=t},"4e08":function(e,t,a){"use strict";a.r(t);var s=function(){var e=this,t=e.$createElement,a=e._self._c||t;return e.isCreate?a("Create",{attrs:{value:e.value,mode:e.mode}}):a("CruResource",{attrs:{resource:e.value,mode:e.realMode},on:{finish:e.finish}},[a("Config",{attrs:{value:e.value,mode:e.realMode}})],1)},r=[],i=a("da25"),o=a("42b0"),l=a("305c"),n=a("fd5f"),c=a("666d"),u=a("81fb"),d={name:"AdmissionPolicy",props:{value:{type:Object,required:!0},mode:{type:String,default:i["w"]},realMode:{type:String,default:i["w"]}},components:{CruResource:n["a"],Config:c["a"],Create:u["a"]},mixins:[o["a"],l["a"]],async fetch(){await this.fetchChart()},provide(){return{chartType:this.value.type}},computed:{isCreate(){return this.realMode===i["u"]}},methods:{async finish(e){try{await this.save(e)}catch(t){this.errors.push(t)}}}},p=d,h=a("d802"),v=Object(h["a"])(p,s,r,!1,null,null,null);t["default"]=v.exports},5057:function(e,t,a){"use strict";a("c22f")},"666d":function(e,t,a){"use strict";var s=function(){var e=this,t=e.$createElement,a=e._self._c||t;return e.$fetchState.pending?a("Loading"):a("Values",{attrs:{value:e.value,"chart-values":e.chartValues,"yaml-values":e.yamlValues,mode:e.mode}})},r=[],i=a("da25"),o=a("c5e6"),l=a("15ca"),n=a("9c6e"),c={name:"Config",props:{mode:{type:String,default:i["C"]},value:{type:Object,required:!0}},components:{Loading:l["a"],Values:n["a"]},fetch(){this.chartValues={policy:this.value,questions:null},this.yamlValues=Object(o["c"])(this.value)},data(){return{chartValues:null,yamlValues:""}}},u=c,d=a("d802"),p=Object(d["a"])(u,s,r,!1,null,null,null);t["a"]=p.exports},6735:function(e,t,a){var s=a("91b7");s.__esModule&&(s=s.default),"string"===typeof s&&(s=[[e.i,s,""]]),s.locals&&(e.exports=s.locals);var r=a("0ed3").default;r("57b28ad0",s,!0,{sourceMap:!1,shadowMode:!1})},"74be":function(e,t,a){var s=a("c453");s.__esModule&&(s=s.default),"string"===typeof s&&(s=[[e.i,s,""]]),s.locals&&(e.exports=s.locals);var r=a("0ed3").default;r("f0db501c",s,!0,{sourceMap:!1,shadowMode:!1})},"81fb":function(e,t,a){"use strict";var s=function(){var e=this,t=e.$createElement,a=e._self._c||t;return e.$fetchState.pending?a("Loading",{attrs:{mode:"relative"}}):a("div",[e.value?a("Wizard",{ref:"wizard",staticClass:"wizard",attrs:{errors:e.errors,steps:e.steps,"edit-first-step":!0,"banner-title":e.bannerTitle,"banner-title-subtext":e.typeModule},on:{next:e.reset,cancel:e.done,finish:e.finish},scopedSlots:e._u([{key:"policies",fn:function(){return[a("PolicyGrid",{attrs:{value:e.packages},on:{selectType:function(t){return e.selectType(t)}},scopedSlots:e._u([e.hasArtifactHub?null:{key:"whitelistBanner",fn:function(){return[a("Banner",{staticClass:"type-banner mb-20 mt-0",attrs:{color:"warning"}},[a("div",[a("p",{staticClass:"mb-10"},[e._v(" "+e._s(e.t("kubewarden.policies.noArtifactHub"))+" ")]),a("AsyncButton",{attrs:{mode:"artifactHub"},on:{click:e.addArtifactHub}})],1)])]},proxy:!0},{key:"customSubtype",fn:function(){return[a("div",{staticClass:"subtype",on:{click:function(t){return e.selectType("custom")}}},[a("div",{staticClass:"subtype__metadata"},[a("div",{staticClass:"subtype__badge",style:{"background-color":"var(--darker)"}},[a("label",[e._v(e._s(e.t("kubewarden.customPolicy.badge")))])]),a("h4",{staticClass:"subtype__label"},[e._v(" "+e._s(e.t("kubewarden.customPolicy.title"))+" ")]),a("div",{staticClass:"subtype__description"},[e._v(" "+e._s(e.t("kubewarden.customPolicy.description"))+" ")])])])]},proxy:!0}],null,!0)})]},proxy:!0},{key:"readme",fn:function(){return[e.packageValues?a("ChartReadme",{staticClass:"mb-20",attrs:{"version-info":e.packageValues}}):e._e()]},proxy:!0},{key:"values",fn:function(){return[a("Values",{attrs:{value:e.value,"chart-values":e.chartValues,"yaml-values":e.yamlValues,mode:e.mode,"custom-policy":e.customPolicy},on:{editor:function(t){return e.yamlOption=t},updateYamlValues:function(t){return e.yamlValues=t}}})]},proxy:!0},{key:"finish",fn:function(){return[a("AsyncButton",{attrs:{disabled:!e.canFinish,mode:"finish"},on:{click:e.finish}})]},proxy:!0}],null,!1,3528290930),model:{value:e.value,callback:function(t){e.value=t},expression:"value"}}):e._e()],1)},r=[],i=a("7838"),o=a.n(i),l=a("1fcb"),n=a.n(l),c=a("330a"),u=a.n(c),d=a("9e74"),p=a.n(d),h=a("42b0"),v=a("305c"),m=a("da25"),b=a("c5e6"),f=a("e24b"),y=a("6418"),g=a("d709"),_=a("15ca"),w=a("7202"),x=a("ed59"),C=a("d892"),k=a("45fd"),V=a("90cd"),O=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("form",{staticClass:"create-resource-container step__policies"},[e._t("whitelistBanner"),a("div",{staticClass:"filter"},[a("LabeledSelect",{staticClass:"filter__keywords",attrs:{clearable:!0,taggable:!0,mode:e.mode,multiple:!0,label:"Filter by Keyword",options:e.keywordOptions},model:{value:e.keywords,callback:function(t){e.keywords=t},expression:"keywords"}}),a("LabeledSelect",{staticClass:"filter__category",attrs:{clearable:!0,searchable:!1,options:e.resourceOptions,mode:e.mode,multiple:!0,placement:"bottom",label:"Filter by Resource Type"},model:{value:e.category,callback:function(t){e.category=t},expression:"category"}}),a("input",{directives:[{name:"model",rawName:"v-model",value:e.searchQuery,expression:"searchQuery"}],ref:"searchQuery",staticClass:"input-sm filter__search",attrs:{type:"search",placeholder:e.t("catalog.charts.search")},domProps:{value:e.searchQuery},on:{input:function(t){t.target.composing||(e.searchQuery=t.target.value)}}}),a("button",{ref:"btn",staticClass:"btn, btn-sm, role-primary",attrs:{type:"button"},on:{click:e.refresh}},[e._v(" "+e._s(e.t("kubewarden.utils.resetFilter"))+" ")])],1),a("div",{staticClass:"grid"},[e._t("customSubtype"),e._l(e.filteredSubtypes,(function(t){return a("div",{key:t.package_id,staticClass:"subtype",on:{click:function(a){return e.$emit("selectType",t)}}},[a("div",{staticClass:"subtype__metadata"},[a("div",{staticClass:"subtype__badge"},[a("label",[e._v(e._s(e.resourceType(t.data["kubewarden/resources"])))])]),t.signed?a("div",{staticClass:"subtype__signed"},[a("i",{directives:[{name:"tooltip",rawName:"v-tooltip",value:e.t("kubewarden.policyCharts.signedPolicy"),expression:"t('kubewarden.policyCharts.signedPolicy')"}],staticClass:"icon icon-checkmark"})]):e._e(),"true"===t.data["kubewarden/mutation"]?a("div",{staticClass:"subtype__mutation"},[a("i",{directives:[{name:"tooltip",rawName:"v-tooltip",value:e.t("kubewarden.policyCharts.mutationPolicy"),expression:"t('kubewarden.policyCharts.mutationPolicy')"}],staticClass:"icon icon-edit"})]):e._e(),"true"===t.data["kubewarden/contextAware"]?a("div",{staticClass:"subtype__aware"},[a("i",{directives:[{name:"tooltip",rawName:"v-tooltip",value:e.t("kubewarden.policyCharts.contextAware"),expression:"t('kubewarden.policyCharts.contextAware')"}],staticClass:"icon icon-show"})]):e._e(),a("h4",{staticClass:"subtype__label"},[e._v(" "+e._s(t.display_name)+" ")]),t.description?a("div",{staticClass:"subtype__description mb-20"},[e._v(" "+e._s(t.description)+" ")]):e._e()])])}))],2)],2)},M=[],S=a("2cb5"),R=a("1d19"),j=a("466b"),P={props:{mode:{type:String,default:m["u"]},value:{type:Array,default:()=>[]}},components:{LabeledSelect:j["a"]},fetch(){const e=this.$route.query;this.category=e[m["b"]]||"",this.searchQuery=e[m["n"]]||""},data(){return{category:null,keywords:[],searchQuery:null}},computed:{filteredSubtypes(){const e=this.value||[],t=e.filter(e=>{var t,a;if(this.category&&(null===(t=e.data)||void 0===t||null===(a=t["kubewarden/resources"])||void 0===a||!a.includes(this.category)))return!1;if(this.searchQuery){const t=this.searchQuery.split(/\s*[, ]\s*/).map(e=>Object(S["e"])(e,!1));for(const a of t){var s;if((null===(s=e.display_name)||void 0===s||!s.match(a))&&e.description&&!e.description.match(a))return!1}}if(this.keywords)for(const r of this.keywords)if(!e.keywords.includes(r))return!1;return!0});return Object(R["a"])(t,["name"])},keywordOptions(){var e;const t=null===(e=this.value)||void 0===e?void 0:e.flatMap(e=>e.keywords).sort();return[...new Set(t)]||!1},resourceOptions(){var e;const t=[],a=null===(e=this.value)||void 0===e?void 0:e.flatMap(e=>{var t;return null===(t=e.data)||void 0===t?void 0:t["kubewarden/resources"]});return null===a||void 0===a||a.flatMap(e=>{const a=e.split(",");a.length>1?a.forEach(e=>t.push(e)):t.push(e)}).sort(),[...new Set(t)]||!1}},methods:{refresh(){this.category=null,this.keywords=[],this.searchQuery=null},resourceType(e){const t=e.split(",");return t.length>1?"Multiple":"*"===e?"Global":e}}},$=P,Y=(a("d453"),a("d802")),q=Object(Y["a"])($,O,M,!1,null,"b8c589ee",null),E=q.exports,T=a("9c6e"),A={name:"Create",components:{AsyncButton:g["b"],Banner:y["a"],Loading:_["a"],ChartReadme:w["a"],Wizard:x["a"],PolicyGrid:E,Values:T["a"]},props:{mode:{type:String,default:m["u"]},value:{type:Object,default:()=>({})}},mixins:[h["a"],v["a"]],async fetch(){var e,t,a,s,r,i;this.errors=[],this.hasArtifactHub&&await this.getPackages(),this.value.apiVersion=`${null===(e=this.schema)||void 0===e||null===(t=e.attributes)||void 0===t?void 0:t.group}.${null===(a=this.schema)||void 0===a||null===(s=a.attributes)||void 0===s?void 0:s.version}`,this.value.kind=null===(r=this.schema)||void 0===r||null===(i=r.attributes)||void 0===i?void 0:i.kind},data(){return{errors:null,bannerTitle:null,packages:null,repository:null,type:null,typeModule:null,version:null,chartValues:{policy:{},questions:{}},yamlValues:"",hasCustomPolicy:!1,yamlOption:V["h"].FORM,stepPolicies:{hidden:!1,name:"policies",label:"Policies",ready:!1,weight:99},stepReadme:{hidden:!1,name:"readme",label:"Readme",ready:!0,weight:98},stepValues:{name:"values",label:"Values",ready:!0,weight:97}}},computed:{isCreate(){return this.realMode===m["u"]},isSelected(){return!!this.type},customPolicy(){return"custom"===this.type},canFinish(){var e,t,a;return this.yamlOption===V["h"].YAML||!(null===(e=this.chartValues)||void 0===e||null===(t=e.policy)||void 0===t||null===(a=t.spec)||void 0===a||!a.module)&&this.hasRequiredRules},hasArtifactHub(){return this.value.artifactHubWhitelist},hasRequiredRules(){var e,t;const{rules:a}=null===(e=this.chartValues)||void 0===e||null===(t=e.policy)||void 0===t?void 0:t.spec,s=["apiGroups","apiVersions","operations","resources"],r=null===a||void 0===a?void 0:a.find(e=>{const t=[];for(const a of s.values())u()(e[a])||t.push(a);return p()(t,s)?e:null});return!u()(r)},packageValues(){var e;if(null!==(e=this.type)&&void 0!==e&&e.name){var t;const e=null===(t=this.packages)||void 0===t?void 0:t.find(e=>e.name===this.type.name);return e}return null},steps(){const e=[];return e.push(this.stepPolicies,this.stepReadme,this.stepValues),e.sort((e,t)=>t.weight-e.weight)}},methods:{async addArtifactHub(e){try{await this.value.updateWhitelist("artifacthub.io"),e(!0)}catch(t){this.errors=t,e(!1)}},done(){var e;this.$router.replace({name:"c-cluster-product-resource",params:{cluster:this.$route.params.cluster,product:V["e"],resource:null===(e=this.schema)||void 0===e?void 0:e.id}})},async finish(e){try{let a;const{ignoreRancherNamespaces:s}=this.chartValues.policy;var t;if(s&&(Object(f["i"])(this.chartValues.policy.spec,"namespaceSelector",{matchExpressions:[C["d"]]}),delete this.chartValues.policy.ignoreRancherNamespaces),this.yamlOption===V["h"].YAML)a=o.a.load(this.yamlValues);else a=null!==(t=this.chartValues)&&void 0!==t&&t.policy?this.chartValues.policy:o.a.load(this.yamlValues);n()(this.value,a),await this.save(e)}catch(a){this.errors.push(a)}},async getPackages(){if(this.repository=await this.value.artifactHubRepo(),this.repository&&this.repository.packages.length>0){const t=this.repository.packages.map(e=>this.packageDetails(e));try{this.packages=await Promise.all(t)}catch(e){console.warn("Error fetching packages: "+e)}}},async packageDetails(e){try{return await this.value.artifactHubPackage(e)}catch(t){}},policyQuestions(){var e,t,a,s;const r=structuredClone(k["a"]);if("custom"===this.type)return Object(f["i"])(this.chartValues,"policy",r),void(this.yamlValues=Object(b["c"])(r));const i=this.packages.find(e=>{var t;return e.name===(null===(t=this.type)||void 0===t?void 0:t.name)}),o=this.value.parsePackageMetadata(null===i||void 0===i||null===(e=i.data)||void 0===e?void 0:e["kubewarden/rules"]),l=this.value.parsePackageMetadata(null===i||void 0===i||null===(t=i.data)||void 0===t?void 0:t["kubewarden/questions-ui"]),c=`${i.repository.name}/${i.name}/${i.version}`,u={apiVersion:this.value.apiVersion,kind:this.value.kind,metadata:{name:i.name,annotations:{[C["b"]]:c}},spec:{module:i.containers_images[0].image,contextAware:JSON.parse(null===i||void 0===i||null===(a=i.data)||void 0===a?void 0:a["kubewarden/contextAware"])||!1,mutating:JSON.parse(null===i||void 0===i||null===(s=i.data)||void 0===s?void 0:s["kubewarden/mutation"])||!1,rules:(null===o||void 0===o?void 0:o.rules)||[]}};n()(r,u),Object(f["i"])(this.chartValues,"policy",r),this.yamlValues=Object(b["c"])(r),l&&Object(f["i"])(this.chartValues,"questions",l)},reset(e){this.$nextTick(()=>{var t;if((null===(t=e.step)||void 0===t?void 0:t.name)===this.stepPolicies.name){const e=["errors","bannerTitle","type","typeModule","version","hasCustomPolicy"];e.forEach(e=>{this[e]=null}),this.stepPolicies.ready=!1,this.stepReadme.hidden=!1,this.chartValues={policy:{},questions:{}},this.yamlOption=V["h"].FORM,this.yamlValues=""}})},selectType(e){var t,a;this.type=e;const s="custom"===e;s?(this.stepReadme.hidden=!0,this.$set(this,"hasCustomPolicy",!0)):(this.packageValues?this.stepReadme.hidden=!1:this.stepReadme.hidden=!0,this.$set(this,"hasCustomPolicy",!1)),this.$router.push({query:{[m["l"]]:V["e"],[m["m"]]:"cluster",[m["c"]]:s?"custom":null===e||void 0===e?void 0:e.name}}),this.policyQuestions(),this.stepPolicies.ready=!0,this.$refs.wizard.next(),this.bannerTitle=s?"Custom Policy":null===e||void 0===e?void 0:e.display_name,this.typeModule=null===(t=this.chartValues)||void 0===t||null===(a=t.policy)||void 0===a?void 0:a.spec.module}}},L=A,F=(a("5057"),Object(Y["a"])(L,s,r,!1,null,"17774782",null));t["a"]=F.exports},8766:function(e,t,a){"use strict";a("1dc0")},"91b7":function(e,t,a){var s=a("5eaa");t=s(!1),t.push([e.i,'.clearfix[data-v-2f850130]:after,.clearfix[data-v-2f850130]:before{content:" ";display:table}.clearfix[data-v-2f850130]:after{clear:both}.list-unstyled[data-v-2f850130]{margin:0;padding:0;list-style-type:none}.no-select[data-v-2f850130]{-webkit-user-select:none;-moz-user-select:none;user-select:none}.no-resize[data-v-2f850130]{resize:none}.hand[data-v-2f850130]{cursor:pointer;cursor:hand}.fixed[data-v-2f850130]{table-layout:fixed}.clip[data-v-2f850130]{text-overflow:ellipsis;overflow:hidden;white-space:nowrap}.clip[data-v-2f850130],.force-wrap[data-v-2f850130]{word-wrap:break-word}.force-wrap[data-v-2f850130]{white-space:normal}.bordered-section[data-v-2f850130]{border-bottom:1px solid var(--border);margin-bottom:20px;padding-bottom:20px}.section-divider[data-v-2f850130]{margin-bottom:20px;margin-top:20px}.step__values__controls[data-v-2f850130]{display:flex;margin-bottom:15px}.step__values__controls[data-v-2f850130]>:not(:last-of-type){margin-right:10px}.step__values__content[data-v-2f850130],.step__values__controls--spacer[data-v-2f850130]{flex:1}.step__values__content[data-v-2f850130]  .tab-container{overflow:auto}',""]),e.exports=t},9294:function(e,t,a){"use strict";a("6735")},"9c6e":function(e,t,a){"use strict";var s=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[e.isCreate?a("div",{staticClass:"step__values__controls"},[a("ButtonGroup",{attrs:{options:e.YAML_OPTIONS,"inactive-class":"bg-disabled btn-sm","active-class":"bg-primary btn-sm"},model:{value:e.yamlOption,callback:function(t){e.yamlOption=t},expression:"yamlOption"}})],1):e._e(),a("div",{staticClass:"scroll__container"},[a("div",{staticClass:"scroll__content"},[e.showForm?[a("Tabbed",{ref:"tabs",staticClass:"step__values__content",attrs:{"side-tabs":!0},on:{changed:function(t){return e.tabChanged(t)}}},[e.valuesComponent?[a(e.valuesComponent,{tag:"component",attrs:{mode:e.mode,"custom-policy":e.customPolicy},model:{value:e.chartValues,callback:function(t){e.chartValues=t},expression:"chartValues"}})]:e._e()],2)]:e.isCreate&&!e.showForm?[a("YamlEditor",{ref:"yaml",staticClass:"step__values__content",attrs:{scrolling:!0,"initial-yaml-values":e.originalYamlValues,"editor-mode":e.editorMode,"hide-preview-buttons":!0},on:{onChanges:e.updateYamlValues},model:{value:e.currentYamlValues,callback:function(t){e.currentYamlValues=t},expression:"currentYamlValues"}})]:e._e(),a("ResourceCancelModal",{ref:"cancelModal",attrs:{"is-cancel-modal":!1,"is-form":!0},on:{"cancel-cancel":function(t){e.preYamlOption=e.yamlOption},"confirm-cancel":function(t){e.yamlOption=e.preYamlOption}}})],2)])])},r=[],i=a("330a"),o=a.n(i),l=a("da25"),n=a("907c"),c=a("c5e6"),u=a("e24b"),d=a("cc2d"),p=a("6860"),h=a("0cb2"),v=a("870a"),m=a("90cd"),b={name:"Values",props:{mode:{type:String,default:l["C"]},chartValues:{type:Object,required:!0},customPolicy:{type:Boolean,default:!1},value:{type:Object,required:!0},yamlValues:{type:String,default:""}},components:{ButtonGroup:d["a"],ResourceCancelModal:p["a"],Tabbed:h["a"],YamlEditor:v["b"]},async fetch(){var e,t,a;if(o()(this.chartValues.questions)&&null!==(e=this.chartValues)&&void 0!==e&&null!==(t=e.policy)&&void 0!==t&&null!==(a=t.spec)&&void 0!==a&&a.settings)try{const e=await this.value.artifactHubPackageVersion();if(e&&!e.error){var s;const t=this.value.parsePackageMetadata(null===e||void 0===e||null===(s=e.data)||void 0===s?void 0:s["kubewarden/questions-ui"]);t&&Object(u["i"])(this.chartValues,"questions",t)}}catch(r){console.warn("Unable to fetch chart questions: "+r)}try{this.version=this.$store.getters["catalog/version"]({repoType:"cluster",repoName:"kubewarden",chartName:m["c"].CONTROLLER}),await this.loadValuesComponent()}catch(r){console.warn("Unable to fetch Version: "+r)}this.generateYaml()},data(){return{YAML_OPTIONS:m["i"],currentYamlValues:"",originalYamlValues:"",showForm:!0,valuesComponent:null,preYamlOption:m["h"].FORM,yamlOption:m["h"].FORM}},watch:{yamlOption(e,t){switch(e){case m["h"].FORM:this.showForm=!0,this.$emit("editor",e);break;case m["h"].YAML:t===m["h"].FORM&&(this.currentYamlValues=Object(c["c"])(this.chartValues.policy),this.updateYamlValues()),this.showForm=!1,this.$emit("editor",e);break}}},computed:{editorMode(){return v["a"].EDIT_CODE},isCreate(){return this.mode===l["u"]}},methods:{generateYaml(){var e,t;const a=this.$store.getters["currentStore"](this.value),s=this.$store.getters[a+"/all"](n["y"]),r=null!==(e=this.chartValues)&&void 0!==e&&e.policy?structuredClone(this.chartValues.policy):this.value;var i;null!==(t=this.yamlValues)&&void 0!==t&&t.length?this.currentYamlValues=this.yamlValues:this.currentYamlValues=Object(c["b"])(s,null===(i=this.value)||void 0===i?void 0:i.type,r)},async loadValuesComponent(){var e,t;null!==(e=this.value)&&void 0!==e&&e.haveComponent("kubewarden/admission")&&(this.valuesComponent=null===(t=this.value)||void 0===t?void 0:t.importComponent("kubewarden/admission"),await this.valuesComponent())},tabChanged(){window.scrollTop=0},updateYamlValues(){this.$emit("updateYamlValues",this.currentYamlValues)}}},f=b,y=(a("9294"),a("d802")),g=Object(y["a"])(f,s,r,!1,null,"2f850130",null);t["a"]=g.exports},be44:function(e,t,a){var s={"./example.vue":"ce60","./istio.vue":"826d","./logging/index.vue":"3c69","./monitoring/ClusterSelector.vue":"9d63","./monitoring/StorageClassSelector.vue":"3e15","./monitoring/alerting/index.vue":"72af","./monitoring/grafana/index.vue":"28b8","./monitoring/index.vue":"1c3e","./monitoring/prometheus/index.vue":"0a93","./monitoring/steps/uninstall-v1.vue":"29af","./rancher-alerting-drivers.vue":"ca1f","./rancher-backup/S3.vue":"8b03","./rancher-backup/index.vue":"39f3","./rancher-gatekeeper.vue":"dd1b"};function r(e){var t=i(e);return a(t)}function i(e){if(!a.o(s,e)){var t=new Error("Cannot find module '"+e+"'");throw t.code="MODULE_NOT_FOUND",t}return s[e]}r.keys=function(){return Object.keys(s)},r.resolve=i,e.exports=r,r.id="be44"},c22f:function(e,t,a){var s=a("47cd");s.__esModule&&(s=s.default),"string"===typeof s&&(s=[[e.i,s,""]]),s.locals&&(e.exports=s.locals);var r=a("0ed3").default;r("039ce98c",s,!0,{sourceMap:!1,shadowMode:!1})},c44b:function(e,t,a){var s=a("5eaa");t=s(!1),t.push([e.i,'.clearfix[data-v-56b7c1bc]:after,.clearfix[data-v-56b7c1bc]:before{content:" ";display:table}.clearfix[data-v-56b7c1bc]:after{clear:both}.list-unstyled[data-v-56b7c1bc]{margin:0;padding:0;list-style-type:none}.no-select[data-v-56b7c1bc]{-webkit-user-select:none;-moz-user-select:none;user-select:none}.no-resize[data-v-56b7c1bc]{resize:none}.hand[data-v-56b7c1bc]{cursor:pointer;cursor:hand}.fixed[data-v-56b7c1bc]{table-layout:fixed}.clip[data-v-56b7c1bc]{text-overflow:ellipsis;overflow:hidden;white-space:nowrap}.clip[data-v-56b7c1bc],.force-wrap[data-v-56b7c1bc]{word-wrap:break-word}.force-wrap[data-v-56b7c1bc]{white-space:normal}.bordered-section[data-v-56b7c1bc]{border-bottom:1px solid var(--border);margin-bottom:20px;padding-bottom:20px}.section-divider[data-v-56b7c1bc]{margin-bottom:20px;margin-top:20px}[data-v-56b7c1bc] .step-container{height:auto}.step__basic[data-v-56b7c1bc]{display:flex;flex-direction:column;flex:1;overflow-x:hidden}.step__basic .spacer[data-v-56b7c1bc]{line-height:2}.step__values__controls[data-v-56b7c1bc]{display:flex;margin-bottom:15px}.step__values__controls[data-v-56b7c1bc]>:not(:last-of-type){margin-right:10px}.step__values__content[data-v-56b7c1bc],.step__values__controls--spacer[data-v-56b7c1bc]{flex:1}.step__values__content[data-v-56b7c1bc]  .tab-container{overflow:auto}',""]),e.exports=t},c453:function(e,t,a){var s=a("5eaa");t=s(!1),t.push([e.i,'.clearfix[data-v-b8c589ee]:after,.clearfix[data-v-b8c589ee]:before{content:" ";display:table}.clearfix[data-v-b8c589ee]:after{clear:both}.list-unstyled[data-v-b8c589ee]{margin:0;padding:0;list-style-type:none}.no-select[data-v-b8c589ee]{-webkit-user-select:none;-moz-user-select:none;user-select:none}.no-resize[data-v-b8c589ee]{resize:none}.hand[data-v-b8c589ee]{cursor:pointer;cursor:hand}.fixed[data-v-b8c589ee]{table-layout:fixed}.clip[data-v-b8c589ee]{text-overflow:ellipsis;overflow:hidden;white-space:nowrap}.clip[data-v-b8c589ee],.force-wrap[data-v-b8c589ee]{word-wrap:break-word}.force-wrap[data-v-b8c589ee]{white-space:normal}.bordered-section[data-v-b8c589ee]{border-bottom:1px solid var(--border);margin-bottom:20px;padding-bottom:20px}.section-divider[data-v-b8c589ee]{margin-bottom:20px;margin-top:20px}.step__policies[data-v-b8c589ee]{display:flex;flex-direction:column;flex:1;overflow-x:hidden}.step__policies .spacer[data-v-b8c589ee]{line-height:2}.filter[data-v-b8c589ee]{display:flex;flex-direction:row;justify-content:flex-end;align-self:flex-end}.filter>*[data-v-b8c589ee]{margin:10px}.filter[data-v-b8c589ee]>:first-child{margin-left:0}.filter[data-v-b8c589ee]>:last-child{margin-right:0}.filter__category[data-v-b8c589ee]{min-width:200px;height:unset}@media only screen and (min-width:480px){.filter[data-v-b8c589ee]{width:100%}}@media only screen and (min-width:1281px){.filter[data-v-b8c589ee]{width:75%}}.grid[data-v-b8c589ee]{display:flex;justify-content:flex-start;flex-wrap:wrap;margin:0 -10px}@media only screen and (min-width:480px){.grid .subtype[data-v-b8c589ee]{width:100%}}@media only screen and (min-width:768px){.grid .subtype[data-v-b8c589ee]{width:calc(50% - 20px)}}@media only screen and (min-width:992px){.grid .subtype[data-v-b8c589ee]{width:calc(33.33333% - 20px)}}@media only screen and (min-width:1281px){.grid .subtype[data-v-b8c589ee]{width:calc(25% - 20px)}}.grid .disabled[data-v-b8c589ee]{opacity:.5;cursor:not-allowed}.subtype__badge[data-v-b8c589ee]{background-color:var(--darker);padding:4px 5px}.subtype__aware[data-v-b8c589ee],.subtype__mutation[data-v-b8c589ee],.subtype__signed[data-v-b8c589ee]{position:absolute;bottom:5px;padding:0 5px;border:1px solid var(--border)}.subtype__signed[data-v-b8c589ee]{left:10px}.subtype__mutation[data-v-b8c589ee]{right:10px}.subtype__aware[data-v-b8c589ee]{right:30px}',""]),e.exports=t},d453:function(e,t,a){"use strict";a("74be")},e1ff:function(e,t,a){"use strict";a.r(t);var s=function(){var e=this,t=e.$createElement,a=e._self._c||t;return e.isCreate?a("Create",{attrs:{value:e.value,mode:e.mode}}):a("CruResource",{attrs:{resource:e.value,mode:e.realMode},on:{finish:e.finish}},[a("Config",{attrs:{value:e.value,mode:e.realMode}})],1)},r=[],i=a("da25"),o=a("42b0"),l=a("305c"),n=a("fd5f"),c=a("666d"),u=a("81fb"),d={name:"ClusterAdmissionPolicy",props:{value:{type:Object,required:!0},mode:{type:String,default:i["w"]},realMode:{type:String,default:i["w"]}},components:{CruResource:n["a"],Config:c["a"],Create:u["a"]},mixins:[o["a"],l["a"]],async fetch(){await this.fetchChart()},provide(){return{chartType:this.value.type}},computed:{isCreate(){return this.realMode===i["u"]}},methods:{async finish(e){try{await this.save(e)}catch(t){this.errors.push(t)}}}},p=d,h=a("d802"),v=Object(h["a"])(p,s,r,!1,null,null,null);t["default"]=v.exports}}]);
//# sourceMappingURL=kubewarden-0.1.18.umd.min.edit.js.map